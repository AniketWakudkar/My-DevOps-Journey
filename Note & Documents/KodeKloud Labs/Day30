The Nautilus application development team was working on a git repository **/usr/src/kodekloudrepos/news** present on Storage server in Stratos DC. This was just a test repository and one of the developers just pushed a couple of changes for testing, but now they want to clean this repository along with the commit history/work tree, so they want to point back the HEAD and the branch itself to a commit with message add data.txt file. Find below more details:



In /usr/src/kodekloudrepos/news git repository, reset the git commit history so that there are only two commits in the commit history i.e initial commit and add data.txt file.


Also make sure to push your changes.


Solution:

git reset --hard <commit-hash>  #commit Id of add data.txt file
git push -g origin master

What is git reset?

Hard reset means moving your branch back to a previous commit and deleting all changes made after that point. It's like using a time machine to go back and erasing everything that happened after.

Three Types of Reset:

1. Soft Reset (--soft)
git reset --soft HEAD~1
```

**What happens:**
- Moves HEAD back one commit
- âœ… **Keeps changes** in staging area
- âœ… **Keeps files** modified
- You can commit again immediately
```
Before: A --- B --- C (HEAD)

After:  A --- B (HEAD)
        Changes from C are staged, ready to commit

2. Mixed Reset (--mixed) - DEFAULT
git reset HEAD~1
# OR
git reset --mixed HEAD~1
```

**What happens:**
- Moves HEAD back one commit
- âœ… **Keeps changes** but unstages them
- âœ… **Keeps files** modified
- You need to `git add` again before committing
```
Before: A --- B --- C (HEAD)

After:  A --- B (HEAD)
        Changes from C exist but are unstaged

3.  Hard Reset (--hard)


âŒ DON'T Use Hard Reset When:
1. Changes are already pushed:
# BAD! Others might have pulled these commits
git reset --hard HEAD~2
git push --force  # This breaks things for teammates!
2. You might want the changes later:
# Use --soft or --mixed instead
git reset --soft HEAD~1  # Keeps your work
3. Working on shared branches:
# Never hard reset on master/main if others use it

**Hard Reset Safety: Recovering Lost Commits**
If you accidentally hard reset, you might be able to recover!
Using git reflog

# See all recent HEAD positions
git reflog

# Output:
# c3d4e5f HEAD@{0}: reset: moving to HEAD~2
# e5f6g7h HEAD@{1}: commit: Lost commit
# d4e5f6g HEAD@{2}: commit: Another lost commit

# Recover the lost commit
git reset --hard e5f6g7h

# Your "lost" commits are back!

Note: reflog keeps history for ~30 days by default.4

Hard Reset vs Other Commands:

Command                             What It Does                        Keeps Changes?
git reset --hard                   Delete commits & changes             âŒ No
git reset --soft                   Delete commits,keep changes          âœ… Yes (staged)
git revertCreate                   new commit to undo                   âœ… Yes (in history)
git checkout                       Switch branches                      âœ… Yes (if clean)
git restore                        Discard file changes                 âŒ No (for that file)

Golden Rules
ğŸ”´ Never hard reset shared branches
ğŸŸ¡ Always check git status first
ğŸŸ¢ Use git reset --soft if you want to keep changes
ğŸŸ¢ Use git revert for pushed commits
ğŸ”µ Remember: git reflog can save you!

Key Takeaways for force push:
ğŸ”´ Force push rewrites history on remote
ğŸŸ¡ Use --force-with-lease (safer than --force)
ğŸŸ¢ Only force push personal/isolated branches
ğŸ”µ For shared branches, use git revert instead
âšª Always communicate with team first